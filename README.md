## Описание

Нейро-социальный анализатор - это персональный проект, направленный на создание структурированного, динамически обновляемого и интеллектуально обогащаемого архива социального окружения пользователя. Используя Telegram-бота как основной интерфейс, проект собирает информацию о людях, их связях, группах и активностях из различных источников, сохраняет ее в графовой базе данных Neo4j и применяет возможности больших языковых моделей (Google Gemini API) для анализа, извлечения данных и даже эволюции самой структуры хранения информации.

Основная цель - превратить разрозненные данные из социальных сетей (VK), заметок и других источников в единую, связанную и осмысленную карту личного социального графа.

## Мотивация

Проект является частью персонального [социологического исследования / управления знаниями] и предназначен исключительно для личного использования, с фокусом на этичном сборе и обработке данных из открытых или явно согласованных источников.

## Ключевые Возможности (Реализованные и Планируемые)

*   **Централизованное Хранение:** Все данные о людях (`Person`), группах (`Group`), институтах (`Institution`) и их связях хранятся в графовой БД Neo4j.
*   **Telegram-бот Интерфейс:** Управление системой, добавление и поиск данных через команды Telegram.
*   **Ручной Ввод Данных:**
    *   Добавление/обновление людей через текстовые описания (`/addperson`).
    *   Импорт данных из CSV файлов.
*   **AI-Powered Извлечение:** Использование Gemini API для извлечения структурированной информации (ФИО, контакты, учеба/работа) из неструктурированного текста.
*   **Автоматизация VK (Базовая):**
    *   Фоновый сбор данных профиля и списка друзей из VK API (требует User Token).
    *   Асинхронная обработка с использованием Celery и Redis.
    *   Управление глубиной обхода социального графа (ограничение по "рукопожатиям").
*   **Управление Данными:**
    *   Поиск людей по различным атрибутам (`/showperson`).
    *   Просмотр списка людей (`/listpeople`).
    *   Установка "корневого" пользователя для графа (`/setroot`).
    *   Явное обновление полей (`/updateperson`).
    *   Удаление пользователя и связанных "осиротевших" данных (`/deleteperson`).
*   **Динамическая Структура (Планируется):** Возможность для AI предлагать новые поля для сущностей с последующим одобрением пользователя.
*   **Анализ Контента (Планируется):** Обработка постов/сообщений из согласованных источников для извлечения фактов, упоминаний и интересов.
*   **Обнаружение Аномалий (Планируется):** Поиск дубликатов, обработка противоречивой информации.
*   **Визуализация (Планируется):** Экспорт данных графа в форматы, совместимые с Gephi, Obsidian и др.

## Технологический Стек

*   **Язык:** Python 3.x
*   **База Данных:** Neo4j (Графовая СУБД) - запускается через Docker.
*   **AI:** Google Gemini API (`google-generativeai`)
*   **Telegram Бот:** `python-telegram-bot`
*   **VK API:** `vk_api`
*   **Фоновые Задачи:** Celery
*   **Брокер Сообщений / Backend Результатов:** Redis - запускается через Docker.
*   **Конфигурация:** `python-dotenv`
*   **Зависимости БД:** `neo4j` (Python driver)
*   **Оркестровка (Локально):** Docker, Docker Compose (рекомендуется)

## Архитектура (Упрощенно)
IGNORE_WHEN_COPYING_START
content_copy
download
Use code with caution.
Markdown
IGNORE_WHEN_COPYING_END
Telegram Bot (Interface)
         ^
         | (Commands, Input)
         v
Python Backend (main.py, bot/, etc.)
 |        |         ^      |
 |        | (AI Req) |      | (DB Ops)
 |        v         |      v
 |   Gemini API <---|---> Neo4j DB (Docker)
 |                   |
 | (Task Queueing)   |
 v                   v
IGNORE_WHEN_COPYING_START
content_copy
download
Use code with caution.
IGNORE_WHEN_COPYING_END

Celery Worker(s) <---> Redis (Broker - Docker)
| (tasks.py)
|
v (VK API Calls)
VK API (vk_client.py)
.env.example .env
```

Отредактируйте файл .env, заполнив его вашими реальными значениями:

TELEGRAM_BOT_TOKEN: Ваш токен Telegram-бота.

NEO4J_URI: URI для подключения к Neo4j (обычно bolt://localhost:7687).

NEO4J_USER: Имя пользователя Neo4j (по умолчанию neo4j).

NEO4J_PASSWORD: Пароль для Neo4j, который вы установите при запуске контейнера.

GEMINI_API_KEY: Ваш API ключ для Google Gemini.

VK_USER_TOKEN: Ваш пользовательский токен VK.

CELERY_BROKER_URL: URL для Redis (обычно redis://localhost:6379/0).

CELERY_RESULT_BACKEND: URL для Redis (обычно redis://localhost:6379/0).

MY_VK_ID: Ваш числовой VK ID (для команды /setroot).

Важно: Не добавляйте файл .env в систему контроля версий (он уже должен быть в .gitignore).

4. Запуск Сервисов (Neo4j и Redis):

Используйте Docker (рекомендуется):

# Запуск Neo4j (замените mysecretpassword на ваш надежный пароль)
docker run --name neuro-social-db -p 7474:7474 -p 7687:7687 -e NEO4J_AUTH=neo4j/mysecretpassword -d neo4j:5

# Запуск Redis
docker run --name neuro-social-redis -d -p 6379:6379 redis
IGNORE_WHEN_COPYING_START
content_copy
download
Use code with caution.
Bash
IGNORE_WHEN_COPYING_END

Neo4j Browser будет доступен по http://localhost:7474.

(Альтернатива) Можно использовать docker-compose.yml (если он будет добавлен в проект).

5. Установка Зависимостей:

pip install -r requirements.txt
IGNORE_WHEN_COPYING_START
content_copy
download
Use code with caution.
Bash
IGNORE_WHEN_COPYING_END

6. Запуск Приложения:

Вам нужно будет запустить 2 или 3 процесса (в отдельных терминалах, в корневой папке проекта с активированным виртуальным окружением):

Telegram Бот:

python main.py
IGNORE_WHEN_COPYING_START
content_copy
download
Use code with caution.
Bash
IGNORE_WHEN_COPYING_END

Celery Worker:

# Windows (стандартный режим, может вызвать проблемы с billiard)
celery -A celery_app worker --loglevel=INFO

# Windows (рекомендуемый режим для избежания проблем с billiard)
celery -A celery_app worker --loglevel=INFO -P solo
IGNORE_WHEN_COPYING_START
content_copy
download
Use code with caution.
Bash
IGNORE_WHEN_COPYING_END


Этические Соображения и Использование Данных


Источники Данных: Основной упор делается на данные, введенные вручную, данные из общедоступных источников (открытые профили VK, публичные каналы Telegram) и данные из источников, доступ к которым был явно согласован с владельцами.

Приватность: Сбор данных из личных переписок, закрытых групп/каналов не производится и не планируется.

VK API: Используется официальный VK API с пользовательским токеном доступа. Необходимо соблюдать Условия использования VK API и не злоупотреблять запросами.


Статус Проекта

Проект находится на стадии реализации Фазы 2: Интеграция с VK API, реализация фоновых задач с Celery/Redis, управление глубиной графа.

Планы на Будущее (Roadmap)

Фаза 3: Анализ Контента и Продвинутые Функции:

Анализ контента из согласованных источников (например, публичные Telegram-каналы).

Извлечение фактов, интересов, тем из постов.

Обнаружение упоминаний и создание связей MENTIONED_IN.

Реализация механизмов подтверждения для /deleteperson.

Улучшенная обработка дубликатов (предложение слияния).

Улучшенная обработка противоречий в данных.

Использование response_schema в Gemini API для надежного структурированного вывода.

Фаза 4: Визуализация и Улучшения:

Экспорт данных графа в форматы (GEXF, GraphML, JSON) для визуализации в Gephi, Obsidian и т.д.

Полноценная работа с тегами (Tag).

Улучшение поиска и фильтрации.

Оптимизация производительности.

Улучшение UI/UX бота.

Дальнейшие идеи:

Подключение других источников данных (соцсети, календари и т.д.).

Более глубокий AI-анализ личности, связей, динамики общения.

Веб-интерфейс для визуализации и управления.

Этические Соображения

Приватность: Проект предназначен для анализа личного социального окружения пользователя на основе публично доступных данных или данных, доступ к которым был явно предоставлен соответствующими лицами.

Запрет Скрапинга: Сбор данных из закрытых профилей, личных переписок или иными способами, нарушающими условия использования платформ (VK, Telegram) или законодательство, недопустим.

Согласие: При расширении функционала для анализа данных, предоставленных другими людьми (например, их каналов), необходимо получение их явного согласия.

Цель: Проект используется в рамках личного исследования и не предназначен для массового сбора данных или неэтичного использования информации.



Проект находится на стадии разработки. Реализованы базовые функции добавления/поиска данных, AI-экстракции, интеграция с Neo4j, начальная автоматизация VK через Celery.

Дальнейшие Планы (Roadmap)

Улучшение AI-анализа (использование структурированного вывода Gemini, анализ текстов профилей/постов).

Расширение автоматического сбора данных (публичные каналы Telegram, другие источники - с учетом этики).

Реализация механизма обнаружения и слияния дубликатов.

Обработка противоречивой информации из разных источников.

Реализация механизма предложений по изменению схемы данных AI.

Добавление функции экспорта данных графа для визуализации.

Улучшение UX Telegram-бота (кнопки, диалоги).

Добавление тестов.

Оптимизация запросов к БД и API.

